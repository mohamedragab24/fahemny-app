{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile in the FAHEMNY application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile, matches Firebase Auth UID."
        },
        "name": {
          "type": "string",
          "description": "Full name of the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "description": "The role of the user.",
          "enum": [
            "student",
            "tutor"
          ]
        },
        "rating": {
          "type": "number",
          "description": "The user's average rating, from 1 to 5."
        },
        "disabled": {
          "type": "boolean",
          "description": "Whether the user account is disabled by an admin."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user profile was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "createdAt"
      ]
    },
    "SessionRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SessionRequest",
      "type": "object",
      "description": "Represents a request for an explanation session posted by a student.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the session request."
        },
        "studentId": {
          "type": "string",
          "description": "The ID of the student (UserProfile) who created the request."
        },
        "tutorId": {
          "type": "string",
          "description": "The ID of the tutor (UserProfile) who accepted the request."
        },
        "title": {
          "type": "string",
          "description": "Title of the session request."
        },
        "field": {
          "type": "string",
          "description": "The academic or professional field of the request (e.g., Physics, Programming)."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of what the student needs to understand."
        },
        "price": {
          "type": "number",
          "description": "The price offered by the student for the session."
        },
        "sessionDate": {
          "type": "string",
          "description": "The proposed date for the session.",
          "format": "date"
        },
        "sessionTime": {
          "type": "string",
          "description": "The proposed time for the session.",
          "format": "time"
        },
        "tutorGender": {
          "type": "string",
          "description": "The preferred gender of the tutor.",
          "enum": [
            "male",
            "female",
            "any"
          ]
        },
        "status": {
          "type": "string",
          "description": "Current status of the request.",
          "enum": [
            "open",
            "accepted",
            "completed",
            "cancelled"
          ]
        },
        "meetingLink": {
          "type": "string",
          "description": "The Zoom/Meet link for the session, provided by the tutor.",
          "format": "uri"
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the request was posted.",
          "format": "date-time"
        },
        "studentRating": {
          "type": "number",
          "description": "Rating (1-5) given by the tutor to the student."
        },
        "tutorRating": {
          "type": "number",
          "description": "Rating (1-5) given by the student to the tutor."
        }
      },
      "required": [
        "id",
        "studentId",
        "title",
        "field",
        "description",
        "price",
        "sessionDate",
        "sessionTime",
        "status",
        "createdAt"
      ]
    },
    "Transaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Transaction",
      "type": "object",
      "description": "Represents a financial transaction in a user's wallet.",
      "properties": {
        "id": {
          "type": "string"
        },
        "userId": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "deposit",
            "withdrawal",
            "session_payment",
            "session_payout"
          ]
        },
        "amount": {
          "type": "number",
          "description": "Transaction amount. Can be positive (credit) or negative (debit)."
        },
        "description": {
          "type": "string"
        },
        "sessionId": {
          "type": "string",
          "description": "Related session request ID, if applicable."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "type",
        "amount",
        "createdAt"
      ]
    },
    "Notification": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Notification",
      "type": "object",
      "description": "Represents a notification for a user.",
      "properties": {
        "id": {
          "type": "string"
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user this notification is for."
        },
        "title": {
          "type": "string"
        },
        "message": {
          "type": "string"
        },
        "link": {
          "type": "string",
          "format": "uri",
          "description": "A link to navigate to when the notification is clicked."
        },
        "isRead": {
          "type": "boolean"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "title",
        "message",
        "isRead",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/userProfiles/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information."
        }
      },
      {
        "path": "/sessionRequests/{requestId}",
        "definition": {
          "entityName": "SessionRequest",
          "schema": {
            "$ref": "#/backend/entities/SessionRequest"
          },
          "description": "Stores all session requests created by students."
        }
      },
      {
        "path": "/transactions/{transactionId}",
        "definition": {
          "entityName": "Transaction",
          "schema": {
            "$ref": "#/backend/entities/Transaction"
          },
          "description": "Stores all wallet transactions for all users."
        }
      },
      {
        "path": "/notifications/{notificationId}",
        "definition": {
          "entityName": "Notification",
          "schema": {
            "$ref": "#/backend/entities/Notification"
          },
          "description": "Stores user notifications."
        }
      }
    ],
    "reasoning": "The Firestore structure is simplified for the FAHEMNY app. It consists of two main collections: `userProfiles` for storing user data including their role (student or tutor), and `sessionRequests` for all tutoring requests. This flat structure is efficient for querying. `sessionRequests` can be queried by tutors, and students can view their own requests. Security rules will manage access based on user roles and ownership."
  }
}